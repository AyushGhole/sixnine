<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Crypto Crash Test Client</title>
  <script src="https://cdn.socket.io/4.7.1/socket.io.min.js"></script>
</head>
<body>
  <h1>Crypto Crash Game ‚Äì WebSocket Test</h1>
  <div id="log"></div>

  <input type="text" id="playerId" placeholder="Enter Player ID">
  <button onclick="cashout()">Cash Out</button>

  <script>
    const socket = io('http://localhost:4000'); // Adjust port if needed
    const log = document.getElementById('log');

    function logEvent(msg) {
      const div = document.createElement('div');
      div.textContent = msg;
      log.prepend(div);
    }

    socket.on('connect', () => logEvent('‚úÖ Connected'));

    socket.on('roundStart', (data) => logEvent('üéÆ Round Started: Hash=' + data.hash));
    socket.on('multiplierUpdate', (data) => logEvent(`üìà Multiplier: ${data.multiplier}x`));
    socket.on('roundCrash', (data) => logEvent(`üí• Crashed at: ${data.crashPoint}x`));
    socket.on('playerCashout', (data) => logEvent(`üíµ Player ${data.playerId} cashed out: ${data.usd} USD at ${data.multiplier}x`));
    socket.on('cashoutSuccess', (data) => logEvent(`‚úÖ You cashed out: ${data.usd} USD at ${data.multiplier}x`));
    socket.on('error', (msg) => logEvent('‚ùå Error: ' + msg));

    function cashout() {
      const playerId = document.getElementById('playerId').value;
      if (!playerId) return alert('Enter a Player ID first!');
      socket.emit('cashout', { playerId });
    }
  </script>
</body>
</html>
